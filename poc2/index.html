<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PS5 WebKit Exploit Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        .container {
            text-align: center;
            width: 100%;
            max-width: 900px;
        }
        
        #loadBtn {
            padding: 15px 30px;
            font-size: 18px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        
        #loadBtn:hover {
            background: #0056b3;
        }
        
        #loadBtn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        #status {
            margin-bottom: 20px;
            font-size: 14px;
            color: #333;
            font-weight: bold;
        }
        
        #terminal {
            width: 100%;
            height: 500px;
            background: #1e1e1e;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            padding: 15px;
            border-radius: 5px;
            overflow-y: auto;
            text-align: left;
            white-space: pre-wrap;
            border: 1px solid #333;
            line-height: 1.4;
        }
        
        .terminal-line {
            margin-bottom: 2px;
        }
        
        .warning {
            color: #ff6b6b;
        }
        
        .success {
            color: #4ecdc4;
        }
        
        .info {
            color: #45b7d1;
        }
        
        .critical {
            color: #ff0000;
            font-weight: bold;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .summary {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç PS5 WebKit Exploit Tester</h1>
        <p>Teste de vulnerabilidades WebKit para PlayStation 5</p>
        
        <button id="loadBtn" onclick="carregarPOC()">Start PS5 Exploit Test</button>
        <div id="status">Ready to test WebKit vulnerabilities...</div>
        
        <div class="summary" id="summary" style="display: none;">
            <h3>üìä Test Summary</h3>
            <div id="summaryContent"></div>
        </div>
        
        <div id="terminal">
[PS5 WebKit Exploit Tester v1.0]
> System initialized
> Target: PlayStation 5 WebKit Browser
> Ready to commence vulnerability analysis...
        </div>
    </div>

    <script>
        // Fun√ß√£o para adicionar logs no terminal
        function logTerminal(message, type = 'normal') {
            const terminal = document.getElementById('terminal');
            const line = document.createElement('div');
            line.className = 'terminal-line';
            
            if (type === 'warning') {
                line.style.color = '#ff6b6b';
            } else if (type === 'success') {
                line.style.color = '#4ecdc4';
            } else if (type === 'info') {
                line.style.color = '#45b7d1';
            } else if (type === 'critical') {
                line.style.color = '#ff0000';
                line.style.fontWeight = 'bold';
            }
            
            // Adiciona timestamp
            const timestamp = new Date().toLocaleTimeString();
            line.textContent = `[${timestamp}] ${message}`;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Override das fun√ß√µes de console para capturar logs
        const originalConsole = {
            log: console.log,
            warn: console.warn,
            error: console.error
        };

        console.log = function(...args) {
            originalConsole.log.apply(console, args);
            logTerminal(args.join(' '), 'info');
        };

        console.warn = function(...args) {
            originalConsole.warn.apply(console, args);
            logTerminal('WARNING: ' + args.join(' '), 'warning');
        };

        console.error = function(...args) {
            originalConsole.error.apply(console, args);
            logTerminal('ERROR: ' + args.join(' '), 'critical');
        };

        // Fun√ß√£o global 'log' para o POC
        window.log = function(message) {
            logTerminal(message, 'info');
            originalConsole.log(message);
        };

        // Fun√ß√£o para atualizar o sum√°rio
        function updateSummary(content) {
            const summary = document.getElementById('summary');
            const summaryContent = document.getElementById('summaryContent');
            summary.style.display = 'block';
            summaryContent.innerHTML = content;
        }

        function carregarPOC() {
            const btn = document.getElementById('loadBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = 'Testing...';
            status.textContent = 'Running PS5 WebKit vulnerability tests...';
            status.style.color = '#007bff';
            
            logTerminal('üöÄ Starting PS5 WebKit Exploit Analysis...', 'info');
            logTerminal('üîß Loading exploit modules...', 'info');
            
            // Carrega o arquivo poc_ps5.js dinamicamente
            const script = document.createElement('script');
            script.src = 'poc_ps5.js';
            
            script.onload = function() {
                status.textContent = 'Exploit tests completed!';
                status.style.color = '#28a745';
                btn.textContent = 'Tests Complete';
                logTerminal('‚úÖ All exploit tests loaded successfully!', 'success');
                logTerminal('üìã Beginning vulnerability assessment...', 'info');
                
                // Inicia os testes ap√≥s um breve delay
                setTimeout(() => {
                    try {
                        if (typeof runExploitTests === 'function') {
                            let results = runExploitTests();
                            
                            // Atualiza o sum√°rio com os resultados
                            let summaryHTML = '';
                            if (results) {
                                summaryHTML = `
                                    <div style="color: #dc3545; font-weight: bold;">
                                        ‚ö†Ô∏è VULNERABILITIES DETECTED!
                                    </div>
                                    <p>This WebKit version may be exploitable.</p>
                                    <p>Proceed with caution and further testing.</p>
                                `;
                            } else {
                                summaryHTML = `
                                    <div style="color: #28a745; font-weight: bold;">
                                        ‚úÖ No obvious vulnerabilities detected
                                    </div>
                                    <p>WebKit version appears to be patched or secure.</p>
                                `;
                            }
                            updateSummary(summaryHTML);
                            
                        } else {
                            logTerminal('‚ùå Function runExploitTests not found in POC', 'critical');
                        }
                    } catch (error) {
                        logTerminal('‚ùå Error executing exploit tests: ' + error, 'critical');
                    }
                }, 1000);
                
                // Captura erros durante a execu√ß√£o
                window.addEventListener('error', function(e) {
                    logTerminal(`üí• Runtime Error: ${e.message}`, 'critical');
                    logTerminal(`üìÑ File: ${e.filename}:${e.lineno}`, 'warning');
                });
            };
            
            script.onerror = function() {
                status.textContent = 'Error: Could not load poc_ps5.js';
                status.style.color = '#dc3545';
                btn.textContent = 'Load Failed';
                logTerminal('‚ùå ERROR: Failed to load poc_ps5.js', 'critical');
                logTerminal('üîç Make sure poc_ps5.js exists in the same directory', 'warning');
            };
            
            document.head.appendChild(script);
        }

        // Log inicial com informa√ß√µes do sistema
        logTerminal('üîç PS5 WebKit Exploit Tester Initialized', 'info');
        logTerminal('üåê User Agent: ' + navigator.userAgent, 'info');
        logTerminal('üíª Platform: ' + navigator.platform, 'info');
        logTerminal('üè¢ Vendor: ' + navigator.vendor, 'info');
        logTerminal('üì± Touch Points: ' + (navigator.maxTouchPoints || 'N/A'), 'info');
        logTerminal('----------------------------------------', 'info');
        
        // Detecta recursos dispon√≠veis
        try {
            if (window.WebAssembly) {
                logTerminal('‚úÖ WebAssembly supported', 'success');
            }
            if (window.SharedArrayBuffer) {
                logTerminal('‚úÖ SharedArrayBuffer supported', 'success');
            }
            if (window.Atomics) {
                logTerminal('‚úÖ Atomics supported', 'success');
            }
        } catch (e) {
            logTerminal('‚ö†Ô∏è Some features not available: ' + e.message, 'warning');
        }

        // Previne que o usu√°rio saia acidentalmente durante a execu√ß√£o
        window.addEventListener('beforeunload', function(e) {
            if (document.getElementById('loadBtn').disabled && 
                document.getElementById('loadBtn').textContent !== 'Tests Complete') {
                e.preventDefault();
                e.returnValue = 'The exploit tests are still running. Are you sure you want to leave?';
            }
        });

        // Adiciona informa√ß√µes de ajuda
        logTerminal('üí° Instructions:', 'info');
        logTerminal('1. Click "Start PS5 Exploit Test" to begin', 'info');
        logTerminal('2. Monitor the terminal for vulnerability detection', 'info');
        logTerminal('3. Check the summary for overall results', 'info');
        logTerminal('4. Look for "VULNERABLE" indicators in red', 'info');
        logTerminal('----------------------------------------', 'info');
    </script>
</body>
</html>
